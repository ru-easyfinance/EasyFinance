<script language="javascript">
{literal}
$(document).ready(function(){
    $('#add_account').click(function(){ accountAddVisible(); }); 
    $('#btnCancelAdd').click(function(){ accountAddUnvisible(); });
	$('#type_account').change(function(){ changeTypeAccount($(this).attr('value')); });
	$('#btnAddAccount').click(function(){ createNewAccount(); });
    
    $('.cat_tr').hover(function () {
        $(this).css('backgroundColor','#F8F6EA');
        //$('#ico_del_' + $(this).attr('value')).show();
    }, function () {
        $(this).css('backgroundColor','#FFFFFF');
        //$('#ico_del_' + $(this).attr('value')).hide();
    });
    
    function accountAddUnvisible() {
        $('#blockCreateAccounts').hide();
    }
    
	function accountAddVisible() {
		changeTypeAccount(document.getElementById('type_account').value);
		$('#blockCreateAccounts').show();	
	}
	
	function changeTypeAccount(id) {
	    $('#loader').html('Подождите, идет загрузка...');
		$('#information_text').hide();
		$.ajax({
			type: "POST",
			url: "/accounts/changeType/",
			data: {
				id: id
			},			
			success: function(data) {
				$('#account_fields').html(data);
				$('#loader').html(' ');
				$('#information_text').show();
			}
		});

	}
	
	function createNewAccount()
	{
		$('#loader').html('Подождите, идет сохранение...');
		$('#information_text').hide();
		$.ajax({
			type: "POST",
			url: "/accounts/add/",
			data: {
				modules: "accounts",
				action: "create_new_account",
				ajax: true
			},
			success: function(data) {
				$('#loader').html(data);
				//$('#dataCategories').html(data);
				
				$('#information_text').show();
				//$('#blockCreateCategories').load('/category/reload_block_create *');
			}
		});
	}
});
{/literal}
</script>

<div id="blockCreateAccounts" style="display:none;">
	{include file="accounts/accounts.block_create.html"}
</div>

<table width="100%">
	<tr>
		<td valign="top" width="100%" style=" background-color:#f8f8d8; padding:5px;">
			<table width="100%" bgcolor="#ffffff" border="0" cellspacing="0">
        	<tbody>
            <tr>
            	<td class="cat_add" colspan="5" style="border-bottom: 1px solid rgb(204, 204, 204); padding: 5px 0pt 15px 5px; background-color: rgb(248, 248, 216);">
                <span style="color: rgb(56, 120, 215);" id="loader"></span>
                <span style="color: rgb(56, 120, 215);" id="information_text">Для редактирования счета выберите ее в списке.</span>
           		</td>
        	</tr>
        	<tr>
            	<td class="cat_add" style="border-bottom: 1px solid rgb(204, 204, 204); padding: 5px 0pt 5px 25px;" width="30%">        	
                	<b>Название</b>
            	</td>
            	<td class="cat_add" style="border-left: 1px solid rgb(204, 204, 204); border-bottom: 1px solid rgb(204, 204, 204); padding-left: 15px; padding-right: 10px;"  width="10%">
            		<b>Остаток на счете</b>
				</td>
                <td class="cat_add" style="border-left: 1px solid rgb(204, 204, 204); border-bottom: 1px solid rgb(204, 204, 204); padding-left: 25px;" width="60%">
                	<b>Комментарий</b>
                </td>
			</tr>
            {foreach from=$accounts item=data}
            <tr style="background-color: rgb(255, 255, 255);" class="cat_tr">
            	<td class="cat_add" style="border-bottom: 1px solid rgb(204, 204, 204); padding: 5px 0pt 5px 25px;">{$data.account_type_name}</td>
                <td class="cat_add" style="border-left: 1px solid rgb(204, 204, 204); border-bottom: 1px solid rgb(204, 204, 204); padding-left: 15px; padding-right: 10px;">0</td>
                <td class="cat_add" style="border-left: 1px solid rgb(204, 204, 204); border-bottom: 1px solid rgb(204, 204, 204); padding-left: 25px;">{$data.account_description}&nbsp;</td>
            </tr>
            {/foreach}
			</tbody>
            </table>
		</td>
	</tr>
</table>