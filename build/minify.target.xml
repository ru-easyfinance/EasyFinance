<?xml version="1.0" encoding="UTF-8"?>
<project name="Minify js css files" default="minify">
    <target name="minify">
        <if>
            <istrue value="${project.jsmin.enabled}" />
            <then>
                <property name="project.js.root" value="${project.basedir}/www/js/"/>

                <mkdir dir="${project.js.root}tmp" />

                <append destFile="${project.js.root}tmp/global.js">
                    <filelist dir="${project.basedir}/www/js/" listfile="include/js/global.list"/>
                </append>

                <stubjsmin jsminpath="external/jsmin-1.1.1.php" targetdir="${project.js.root}">
                    <fileset dir="${project.js.root}tmp/">
                        <include name="global.js" />
                    </fileset>
                </stubjsmin>
                <delete dir="${project.js.root}tmp/" includeemptydirs="true" />
            </then>
            <else>
                <echo>JavaScript compression disabled. Skipping ...</echo>
            </else>
        </if>
        <if>
            <istrue value="${project.cssmin.enabled}" />
            <then>
                <property name="project.css.root" value="${project.basedir}/www/css/"/>
                <mkdir dir="${project.css.root}tmp" />

                <append destFile="${project.css.root}tmp/global.css">
                    <fileset dir="${project.css.root}jquery/">
                        <include name="jquery.rw-calculator.css" />
                        <include name="jquery.jgrowl.css" />
                        <include name="jquery.jHtmlArea.css" />
                        <include name="jquery.jHtmlArea.ColorPickerMenu.css" />
                        <include name="fullcalendar.css" />
                        <include name="fancy.css" />
                        <include name="ufd-base.css" />
                        <include name="ufd-plain.css" />
                    </fileset>
                    <fileset dir="${project.css.root}jquery/south-street/">
                        <include name="ui.core.css" />
                        <include name="ui.resizable.css" />
                        <include name="ui.dialog.css" />
                        <include name="ui.tabs.css" />
                        <include name="ui.datepicker.css" />
                        <include name="ui.accordion.css" />
                    </fileset>
                    <fileset dir="${project.css.root}">
                        <include name="main.css" />
                        <include name="menuUser.css" />
                        <include name="dialogBox.css" />
                        <include name="efTable.css" />
                        <include name="calendar.css" />
                        <include name="calendarOverdue.css" />
                        <include name="calendarLeft.css" />
                        <include name="report.css" />
                        <include name="expert.css" />
                        <include name="expertsList.css" />
                        <include name="profile.css" />
                        <include name="categoriesJournal.css" />
                        <include name="operationsJournal.css" />
                        <include name="budgetMaster.css" />
                        <include name="budget.css" />
                        <include name="accountsPanel.css" />
                        <include name="accountsJournal.css" />
                    </fileset>
                    <fileset dir="${project.css.root}screens/">
                        <include name="integration.screen.css" />
                        <include name="promoTKS.screen.css" />
                    </fileset>
                </append>
                <stubcssmin cssminpath="external/cssmin-v1.0.0.php" targetdir="${project.css.root}">
                    <fileset dir="${project.css.root}tmp/">
                        <include name="global.css" />
                    </fileset>
                </stubcssmin>
                <delete dir="${project.css.root}tmp/" includeemptydirs="true" />
            </then>
            <else>
                <echo>Css compression disabled. Skipping ...</echo>
            </else>
        </if>
    </target>
</project>
